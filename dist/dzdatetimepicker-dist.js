"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),findParent=function(e,t){var n=function(e){return e.getAttribute("id")===t||e.classList.contains(t)};if(n(e))return e;for(;e.parentNode;){if((e=e.parentNode)===document.body||e===document)return undefined;if(n(e))return e}return undefined},inputFocus=function(e){return e&&e.preventDefault&&e.preventDefault(),e.target.blur(),!1},inputBlur=function(e){return e&&e.preventDefault&&e.preventDefault(),!1};!function(e){var t=function(){function t(e){_classCallCheck(this,t),this.customClass=e,this.init()}return _createClass(t,[{key:"init",value:function(){if(this.initialized)return!1;this.initialized=!0,this.setupHooks()}},{key:"setupHooks",value:function(){var t=this,n=function(e){e&&e.preventDefault&&e.preventDefault();var n=t.getCalendar(),a=n.dataset.current.split("-"),r=new Date(a[0],a[1]),o=new Date(r.getFullYear(),r.getMonth()-1),l=t.drawDates(t.getDaysArrayByMonth(o)),c=document.querySelector("#dz-calendar .dz-dates");n.insertAdjacentHTML("beforeEnd",l),l=n.children[n.children.length-1],n.removeChild(c);var d=o.getFullYear(),s=o.getMonth();return n.dataset.current=d+" - "+s,n.children[0].children[0].innerHTML=t.getMonthName(s)+", "+d,i(),!1},a=function(e){e&&e.preventDefault&&e.preventDefault();var n=t.getCalendar(),a=n.dataset.current.split("-"),r=new Date(a[0],a[1]),o=new Date(r.getFullYear(),r.getMonth()+1),l=t.drawDates(t.getDaysArrayByMonth(o)),c=document.querySelector("#dz-calendar .dz-dates");n.insertAdjacentHTML("beforeEnd",l),l=n.children[n.children.length-1],n.removeChild(c);var d=o.getFullYear(),s=o.getMonth();return n.dataset.current=d+" - "+s,n.children[0].children[0].innerHTML=t.getMonthName(s)+", "+d,i(),!1};this.bodyClick=function(e){var n=t.getCalendar();if(n)if(n.classList.contains("active")){if(!t.isInCalendar(e.target))return t.cleanupCalendar(e,n)}else document.body.removeChild(n)};var r=function(e){var n=t.getCalendar(),a=parseInt(e.target.innerHTML),r=n.dataset.current.split("-");a=new Date(r[0],r[1],a);var i=window[t.source.dataset.onset];i&&i(a);var o=a.getMonth()+1;1===o.toString().length&&(o="0"+o);var l=a.getDate();1===l.toString().length&&(l="0"+l);var c=[a.getFullYear(),o,l].join("-");return"INPUT"===t.source.nodeName?(t.source.value=c,"InputEvent"in window?t.source.dispatchEvent(new InputEvent("input")):t.source.dispatchEvent(new Event("input"))):t.source.dataset.dateVal&&(t.source.dataset.dateVal=c),t.callback&&t.callback(t.source,c),t.cleanupCalendar(e,n)},i=function(){t.getCalendar()&&Array.prototype.slice.call(document.querySelectorAll("#dz-calendar .dz-dates div")).forEach(function(e){e.classList.contains("disabled")||e.addEventListener("click",r,!1)})},o=function e(r){var o=t.getCalendar();if(o)return t.cleanupCalendar(r,o),setTimeout(function(){e(r)},300),!1;var l=r.target.getBoundingClientRect(),c={x:l.left+l.width/2,y:l.top+l.height},d="INPUT"===r.target.nodeName?r.target:findParent(r.target,t.customClass||"date-trigger");t.source=d;var s=t.drawCalendar();document.body.insertAdjacentHTML("beforeEnd",s),s=document.getElementById("dz-calendar");var u=s.getBoundingClientRect(),v=4*u.width;s.style.left=c.x-v/2+"px",s.style.top=c.y+16+"px";var h=s.children[0].children[1],f=s.children[0].children[2];h.addEventListener("click",n,!1),f.addEventListener("click",a,!1),s.classList.add("active"),i();var p="didShowDatePicker";return window[p]&&window[p](s),setTimeout(function(){document.body.addEventListener("click",t.bodyClick,!1)},500),!1},l=document.querySelectorAll(this.customClass?"."+this.customClass:".date-trigger");l=Array.prototype.slice.call(l);var c=function(e){e&&(e.addEventListener("click",o,!1),"INPUT"===e.nodeName&&(e.addEventListener("focus",inputFocus,!1),e.addEventListener("blur",inputBlur,!1)))};l.forEach(function(e){c(e)}),e.attachDateTrigger=c}},{key:"getCalendar",value:function(){return document.getElementById("dz-calendar")}},{key:"isInCalendar",value:function(e){var t=findParent(e,"dz-calendar");return t!==document.body&&t!=undefined}},{key:"getMonthName",value:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].splice(e,1)}},{key:"getDaysArrayByMonth",value:function(e){for(var t=e.getFullYear(),n=e.getMonth(),a=new Date(t,n+1,0).getDate(),r=[];a>0;)r.push(new Date(t,n,a)),a--;return r.reverse()}},{key:"drawDates",value:function(e){var t=new Date;"INPUT"===this.source.nodeName&&this.source.value?t=new Date(this.source.value):this.source.dataset.dateVal&&(t=new Date(this.source.dataset.dateVal));var n='<div class="dz-dates">',a=(this.getCalendar(),this.source.dataset),r=a.dateMax,i=a.dateMin;r&&(r=new Date(r)),i&&(i=new Date(i));var o=null;"INPUT"===this.source.nodeName?o=new Date(this.source.value):this.source.dataset.dateVal&&(o=new Date(this.source.dataset.dateVal));var l=e[0].getDay(),c=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getYear()&&t.getYear()};return e.forEach(function(e,a){var d=[];c(t,e)&&d.push("today"),o&&c(e,o)&&d.push("selected"),i&&i.getTime()-e.getTime()>0&&d.push("disabled"),r&&r.getTime()-e.getTime()<0&&d.push("disabled"),d=d.join(" "),n+=0!==a?'<div role="button" class="'+d+'">'+e.getDate()+"</div>":'<div style="margin-left:'+35*l+'px;" role="button" class="'+d+'">'+e.getDate()+"</div>"}),n+="</div>"}},{key:"drawCalendar",value:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),a=this.getDaysArrayByMonth(e),r=["S","M","T","W","T","F","S"],i='<div id="dz-calendar" class="inline-container" data-current="'+t+"-"+n+'">\n        <div class="dz-title"> \n           <h4>'+this.getMonthName(e.getMonth())+", "+e.getFullYear()+'</h4>\n           <button id="dz-prev"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>keyboard_arrow_left</title><path d="M14.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.407-4.594 4.593z" fill="#8FCB14" fill-rule="evenodd"/></svg></button>\n           <button id="dz-next"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>keyboard_arrow_right</title><path d="M8.578 16.36l4.594-4.594-4.594-4.594 1.406-1.406 6 6-6 6z" fill="#8FCB14" fill-rule="evenodd"/></svg></button>\n        </div>\n        <div class="dz-days">';return r.forEach(function(e){i+="<div>"+e+"</div>"}),i+="</div>\n        "+this.drawDates(a)+"\n      </div>"}},{key:"cleanupCalendar",value:function(e,t){var n=this;return e&&e.preventDefault&&e.preventDefault(),t&&(t.classList.remove("active"),setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t),n.source=undefined},300)),document.body.removeEventListener("click",this.bodyClick,!1),!1}}]),t}();e&&e.exports?e.exports=Object.assign({},{DatePicker:t,datePicker:new t}):(e.DatePicker=t,e.datePicker=new t)}("undefined"==typeof module?window:module),function(e){var t=function(){function e(){_classCallCheck(this,e),this.init()}return _createClass(e,[{key:"init",value:function(){if(this.initialized)return!1;this.initialized=!0,this.setupHooks()}},{key:"setupHooks",value:function(){var e=this;this.bodyClick=function(t){if("SELECT"===t.target.nodeName)return!1;var n=e.getTimer();if(n)if(n.classList.contains("active")){if(!e.isInTimer(t.target))return e.cleanupTimer(t,n)}else document.body.removeChild(n);document.body.removeEventListener("click",e.bodyClick,!1)};var t=function(){var t=e.getTimer(),n=parseInt(t.children[0].value),a=parseInt(t.children[1].value),r=parseInt(t.children[2].value);1===r&&12!=n&&(n+=12),12===n&&0===r&&(n="00"),"INPUT"===e.source.nodeName&&(e.source.value=n+":"+a,"InputEvent"in window?e.source.dispatchEvent(new InputEvent("input")):e.source.dispatchEvent(new Event("input")));var i=window[e.source.dataset.onchange];i&&i({string:n+":"+a,hours:parseInt(n),minutes:a})},n=function n(a){var r=e.getTimer();if(r)return e.cleanupTimer(a,r),setTimeout(function(){n(a)},300),!1;var i=a.target.getBoundingClientRect(),o={x:i.left,y:i.top+i.height};e.source=a.target;var l=e.drawTimer();if(document.body.insertAdjacentHTML("beforeEnd",l),l=e.getTimer(),"INPUT"!==e.source.nodeName||!e.source.value.length){var c=new Date,d=c.getHours(),s=c.getMinutes();l.children[0].value=d>12?d-12:d,l.children[1].value=s,l.children[2].value=d>=12?1:0}Array.prototype.slice.call(l.children).forEach(function(e){e.addEventListener("change",t,!1)});var u=l.getBoundingClientRect();u.width;return l.style.left=o.x-16+"px",l.style.top=o.y+16+"px",l.classList.add("active"),setTimeout(function(){document.body.addEventListener("click",e.bodyClick,!1)},500),!1},a=function(e){e&&(e.addEventListener("click",n,!1),"INPUT"===e.nodeName&&(e.addEventListener("focus",inputFocus,!1),e.addEventListener("blur",inputBlur,!1)))};Array.prototype.slice.call(document.querySelectorAll(".timer-trigger")).forEach(function(e){a(e)}),window.attachTimeTrigger=a}},{key:"getTimer",value:function(){return document.getElementById("dz-timer")}},{key:"isInTimer",value:function(e){var t=findParent(e,"dz-timer");return t!==document.body&&t!=undefined}},{key:"drawTimer",value:function(){var e=null,t=void 0,n=void 0,a=!1;"INPUT"===this.source.nodeName&&(e=this.source.value),e&&(e=e.split(":"),t=parseInt(e[0]),n=e[1],t>12&&(t-=12,a=!0));var r='<div id="dz-timer" class="inline-container">\n        <select class="hours">',i=Array.from(Array(13).keys());return i.shift(),r+=i.map(function(e){return e===t?"<option value='"+e+"' selected='selected'>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>"}).join(" "),r+='</select>\n        <select class="minutes">',r+=Array.from(Array(60).keys()).map(function(e){return 1===e.toString().length&&(e="0"+e),e.toString()===n?"<option value='"+e+"' selected='selected'>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>"}).join(" "),r+="</select>\n        <select class=\"shift\">\n          <option value='0' "+(a?"":"selected='selected'")+">AM</option>\n          <option value='1' "+(a?"selected='selected'":"")+">PM</option>\n        </select>",r+="</select>\n      </div>"}},{key:"cleanupTimer",value:function(e,t){var n=this;return e&&e.preventDefault&&e.preventDefault(),t&&(t.classList.remove("active"),setTimeout(function(){n.source=undefined,t.parentNode&&document.body.removeChild(t)},300)),document.body.removeEventListener("click",this.bodyClick,!1),!1}}]),e}();e&&e.exports?e.exports=Object.assign({},{TimePicker:t,timePicker:new t}):(e.TimePicker=t,e.timePicker=new t)}("undefined"==typeof module?window:module),function(e){var t=function(){function e(t){_classCallCheck(this,e),this.elem=t,this.initialized=!1,this.init()}return _createClass(e,[{key:"init",value:function(){if(this.elem&&!this.initialized){this.initialized=!0;var e=+new Date;this.startElem=this.elem.querySelector(".range-start"),this.endElem=this.elem.querySelector(".range-end"),this.startElem.setAttribute("type","text"),this.endElem.setAttribute("type","text"),this.startElem.classList.add("start"+e),this.endElem.classList.add("end"+e),this.startController=new DatePicker("start"+e),this.endController=new DatePicker("end"+e),this.startController.callback=this.callback.bind(this),this.endController.callback=this.startController.callback}}},{key:"callback",value:function(){var e=[].concat(Array.prototype.slice.call(arguments)),t=e[0],n=e[1],a=t.classList.contains("range-start");a?this.start=n:this.end=n,a?this.endElem.dataset.dateMin=n:this.startElem.dataset.dateMax=n}}]),e}();e.hasOwnProperty("exports")?e.exports=Object.assign({},e.exports,t):e.RangePicker=t}("undefined"==typeof module?window:module),function(e){if(e){var t={date:!1,time:!1,"datetime-local":!1},n=document.createElement("input");Object.keys(t).forEach(function(e){n.type=e,t[e]=n.type===e});var a=function(){Array.prototype.slice.call(document.querySelectorAll('input[type="time"]')).forEach(attachTimeTrigger)},r=function(){Array.prototype.slice.call(document.querySelectorAll('input[type="date"]')).forEach(attachDateTrigger)},i=function(){Array.prototype.slice.call(document.querySelectorAll('input[type="datetime-local"]')).forEach(function(e){var n=e,a=n.parentNode,r=function(){return a.querySelector("input[data-original='datetime-local']")},i=function(e){r().dataset.date=e.target.value},o=function(e){r().dataset.time=e.target.value};n.__defineGetter__("value",function(){return((this.dataset.date||"")+" "+(this.dataset.time||"")).trim()}),n.type="hidden",n.dataset.original="datetime-local";var l=document.createElement("input");l.type=t.date?"date":"text",l.placeholder="Date",l.oninput=i;var c=document.createElement("input");c.type=t.time?"time":"text",c.placeholder="Time",c.oninput=o,[l,c].forEach(function(e){e.__defineGetter__("required",function(){return n.required}),e.__defineGetter__("validity",function(){return n.validity}),e.__defineGetter__("pattern",function(){return n.pattern}),e.__defineGetter__("validationMessage",function(){return n.validationMessage}),e.__defineSetter__("validationMessage",function(e){n.validationMessage=e})}),a.insertAdjacentElement("beforeEnd",l),a.insertAdjacentElement("beforeEnd",c),attachDateTrigger(l),attachTimeTrigger(c)})};t.date||r(),t.time||a(),t["datetime-local"]||i()}}("undefined"==typeof module?window:undefined);
//# sourceMappingURL=dzdatetimepicker-dist.js.map