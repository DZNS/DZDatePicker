"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),findParent=function(e,t){var n=function(e){return e.getAttribute("id")===t||e.classList.contains(t)};if(n(e))return e;for(;e.parentNode;){if((e=e.parentNode)===document.body||e===document)return;if(n(e))return e}},inputFocus=function(e){return e&&e.preventDefault&&e.preventDefault(),e.target.blur(),!1},inputBlur=function(e){return e&&e.preventDefault&&e.preventDefault(),!1};!function(e){var t=function(){function t(e){_classCallCheck(this,t),this.customClass=e,this.init()}return _createClass(t,[{key:"init",value:function(){if(this.initialized)return!1;this.initialized=!0,this.setupHooks()}},{key:"setupHooks",value:function(){var t=this,n=function(e){e&&e.preventDefault&&e.preventDefault();var n=t.getCalendar(),a=n.dataset.current.split("-"),r=new Date(a[0],a[1]),o=new Date(r.getFullYear(),r.getMonth()-1),l=t.drawDates(t.getDaysArrayByMonth(o)),u=document.querySelector("#dz-calendar .dz-dates");n.insertAdjacentHTML("beforeEnd",l),l=n.children[n.children.length-1],n.removeChild(u);var s=o.getFullYear(),c=o.getMonth();return n.dataset.current=s+" - "+c,n.children[0].children[0].innerHTML=t.getMonthName(c)+", "+s,i(),!1},a=function(e){e&&e.preventDefault&&e.preventDefault();var n=t.getCalendar(),a=n.dataset.current.split("-"),r=new Date(a[0],a[1]),o=new Date(r.getFullYear(),r.getMonth()+1),l=t.drawDates(t.getDaysArrayByMonth(o)),u=document.querySelector("#dz-calendar .dz-dates");n.insertAdjacentHTML("beforeEnd",l),l=n.children[n.children.length-1],n.removeChild(u);var s=o.getFullYear(),c=o.getMonth();return n.dataset.current=s+" - "+c,n.children[0].children[0].innerHTML=t.getMonthName(c)+", "+s,i(),!1};this.bodyClick=function(e){var n=t.getCalendar();if(n)if(n.classList.contains("active")){if(!t.isInCalendar(e.target))return t.cleanupCalendar(e,n)}else document.body.removeChild(n)};var r=function(e){var n=t.getCalendar(),a=parseInt(e.target.innerHTML),r=n.dataset.current.split("-");a=new Date(r[0],r[1],a);var i=window[t.source.dataset.onset];i&&i(a);var o=a.getMonth()+1;1===o.toString().length&&(o="0"+o);var l=a.getDate();1===l.toString().length&&(l="0"+l);var u=[a.getFullYear(),o,l].join("-");return"INPUT"===t.source.nodeName?(t.source.value=u,"InputEvent"in window?t.source.dispatchEvent(new InputEvent("input")):t.source.dispatchEvent(new Event("input"))):t.source.dataset.dateVal&&(t.source.dataset.dateVal=u),t.callback&&t.callback(t.source,u),t.cleanupCalendar(e,n)},i=function(){if(t.getCalendar()){Array.prototype.slice.call(document.querySelectorAll("#dz-calendar .dz-dates div")).forEach(function(e){e.classList.contains("disabled")||e.addEventListener("click",r,!1)})}},o=function e(r){var o=t.getCalendar();if(o)return t.cleanupCalendar(r,o),setTimeout(function(){e(r)},300),!1;var l=r.target.getBoundingClientRect(),u=l.left+l.width/2,s=l.top+l.height,c="INPUT"===r.target.nodeName?r.target:findParent(r.target,t.customClass||"date-trigger");t.source=c;var d=t.drawCalendar();document.body.insertAdjacentHTML("beforeEnd",d);var h=4*(d=document.getElementById("dz-calendar")).getBoundingClientRect().width;d.style.left=u-h/2+"px",d.style.top=s+16+"px";var v=d.children[0].children[1],f=d.children[0].children[2];v.addEventListener("click",n,!1),f.addEventListener("click",a,!1),d.classList.add("active"),t.source.setAttribute("aria-expanded","true"),t.source.hasAttribute("id")&&d.setAttribute("aria-describedby",t.source.getAttribute("id")),i();return window.didShowDatePicker&&window.didShowDatePicker(d),setTimeout(function(){document.body.addEventListener("click",t.bodyClick,!1)},500),!1},l=document.querySelectorAll(this.customClass?"."+this.customClass:".date-trigger"),u=function(e){e&&(e.addEventListener("click",o,!1),"INPUT"===e.nodeName&&(e.addEventListener("focus",inputFocus,!1),e.addEventListener("blur",inputBlur,!1),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false")))};(l=Array.prototype.slice.call(l)).forEach(function(e){u(e)}),e.attachDateTrigger=u}},{key:"getCalendar",value:function(){return document.getElementById("dz-calendar")}},{key:"isInCalendar",value:function(e){var t=findParent(e,"dz-calendar");return t!==document.body&&void 0!=t}},{key:"getMonthName",value:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].splice(e,1)}},{key:"getFullMonthName",value:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"].splice(e,1)}},{key:"getDaysArrayByMonth",value:function(e){for(var t=e.getFullYear(),n=e.getMonth(),a=new Date(t,n+1,0).getDate(),r=[];a>0;)r.push(new Date(t,n,a)),a--;return r.reverse()}},{key:"drawDates",value:function(e){var t=this,n=new Date;"INPUT"===this.source.nodeName&&this.source.value?n=new Date(this.source.value):this.source.dataset.dateVal&&(n=new Date(this.source.dataset.dateVal));var a='<div class="dz-dates">',r=(this.getCalendar(),this.source.dataset),i=r.dateMax,o=r.dateMin;i&&(i=new Date(i)),o&&(o=new Date(o));var l=null;"INPUT"===this.source.nodeName?l=new Date(this.source.value):this.source.dataset.dateVal&&(l=new Date(this.source.dataset.dateVal));var u=e[0].getDay(),s=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getYear()==t.getYear()};return e.forEach(function(e,r){var c=[];s(n,e)&&c.push("today"),l&&s(e,l)&&c.push("selected"),o&&o.getTime()-e.getTime()>0&&c.push("disabled"),i&&i.getTime()-e.getTime()<0&&c.push("disabled"),c=c.join(" ");var d=e.toDateString();(d=[d.substr(0,3),d.substr(4)])[0]+="day, ",d[1]=[d[1].substr(0,3),d[1].substr(4)],d[1][0]=t.getFullMonthName(e.getMonth()),d[1]=d[1].join(" "),d=d.join(""),a+=0!==r?'<div role="link" aria-label="'+d+'" class="'+c+'">'+e.getDate()+"</div>":'<div style="margin-left:'+35*u+'px;" role="link" aria-label="'+d+'" class="'+c+'">'+e.getDate()+"</div>"}),a+="</div>"}},{key:"drawCalendar",value:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),a=this.getDaysArrayByMonth(e),r='<div id="dz-calendar" class="inline-container" data-current="'+t+"-"+n+'"  role="dialog" aria-label="Calendar">\n        <div class="dz-title"> \n           <h4 aria-role="Presentation" aria-label="'+this.getFullMonthName(e.getMonth())+", "+e.getFullYear()+'">'+this.getMonthName(e.getMonth())+", "+e.getFullYear()+'</h4>\n           <button id="dz-prev" aria-label="Previous Month" title="Previous Month"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Previous Month</title><path d="M14.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.407-4.594 4.593z" fill="#8FCB14" fill-rule="evenodd"/></svg></button></button>\n           <button id="dz-next" aria-label="Next Month" title="Next Month"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Next Month</title><path d="M8.578 16.36l4.594-4.594-4.594-4.594 1.406-1.406 6 6-6 6z" fill="#8FCB14" fill-rule="evenodd"/></svg></button>\n        </div>\n        <div class="dz-days">';return["S","M","T","W","T","F","S"].forEach(function(e){r+="<div>"+e+"</div>"}),r+="</div>\n        "+this.drawDates(a)+"\n      </div>"}},{key:"cleanupCalendar",value:function(e,t){var n=this;return e&&e.preventDefault&&e.preventDefault(),t&&(t.classList.remove("active"),setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t),n.source=void 0},300)),this.source&&(console.log(this.source),this.source.setAttribute("aria-expanded","false"),console.log(this.source.getAttribute("aria-expanded"))),document.body.removeEventListener("click",this.bodyClick,!1),!1}}]),t}();e&&e.exports?e.exports=Object.assign({},{DatePicker:t,datePicker:new t}):(e.DatePicker=t,e.datePicker=new t)}("undefined"==typeof module?window:module),function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Promise(function(t){window.requestAnimationFrame(function(){var n=e();t(n)})})},n=function(){function e(){_classCallCheck(this,e),this.init()}return _createClass(e,[{key:"init",value:function(){if(this.initialized)return!1;this.initialized=!0,this.setupHooks()}},{key:"setupHooks",value:function(){var e=this;this.bodyClick=function(t){if("SELECT"===t.target.nodeName)return!1;var n=e.getTimer();if(n)if(n.classList.contains("active")){if(!e.isInTimer(t.target))return e.cleanupTimer(t,n)}else document.body.removeChild(n);document.body.removeEventListener("click",e.bodyClick,!1)},this.bodyInput=function(t){var n=t.keyCode;return 13!=n&&27!=n||(27==n&&e.hasOwnProperty("originalValue")&&(e.source.value=e.originalValue),e.hasOwnProperty("originalValue")&&e.originalValue,e.cleanupTimer(void 0,e.getTimer()),!0)};var n=function(){var t=e.getTimer(),n=parseInt(t.children[0].value),a=parseInt(t.children[1].value),r=parseInt(t.children[2].value);1===r&&12!=n&&(n+=12),12===n&&0===r&&(n="00"),"INPUT"===e.source.nodeName&&(e.source.value=n+":"+a,"InputEvent"in window?e.source.dispatchEvent(new InputEvent("input")):e.source.dispatchEvent(new Event("input")));var i=window[e.source.dataset.onchange];i&&i({string:n+":"+a,hours:parseInt(n),minutes:a})},a=function a(r){var i=e.getTimer();if(i)return e.cleanupTimer(r,i),setTimeout(function(){a(r)},300),!1;var o=r.target.getBoundingClientRect(),l=o.left,u=o.top+o.height;e.source=r.target;var s=e.drawTimer();return t(function(){document.body.insertAdjacentHTML("beforeEnd",s)}).then(function(){if(s=e.getTimer(),"INPUT"!==e.source.nodeName||!e.source.value.length){var n=new Date,a=n.getHours(),r=n.getMinutes();return t(function(){s.children[0].value=a>12?a-12:a,s.children[1].value=r,s.children[2].value=a>=12?1:0})}return Promise.resolve()}).then(function(){return Array.prototype.slice.call(s.children).forEach(function(e){e.addEventListener("change",n,!1)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Promise(function(t){window.requestAnimationFrame(function(){var n=e();t(n)})})}(function(){return s.getBoundingClientRect()})}).then(function(n){n.width;return s.style.left=l-16+"px",s.style.top=u+16+"px",t(function(){s.classList.add("active"),e.source.setAttribute("aria-expanded","true"),e.source.hasAttribute("id")&&s.setAttribute("aria-describedby",e.source.getAttribute("id"))})}).then(function(){s.querySelector("select").focus(),e.originalValue=e.source.value,document.body.addEventListener("click",e.bodyClick,!1),document.body.addEventListener("keydown",e.bodyInput,!1)}).catch(function(e){console.error(e)}),!1},r=function(e){e&&(e.addEventListener("click",a,!1),"INPUT"===e.nodeName&&(e.addEventListener("focus",inputFocus,!1),e.addEventListener("blur",inputBlur,!1),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false")))};Array.prototype.slice.call(document.querySelectorAll(".timer-trigger")).forEach(function(e){r(e)}),window.attachTimeTrigger=r}},{key:"getTimer",value:function(){return document.getElementById("dz-timer")}},{key:"isInTimer",value:function(e){var t=findParent(e,"dz-timer");return t!==document.body&&void 0!=t}},{key:"drawTimer",value:function(){var e=null,t=void 0,n=void 0,a=!1;"INPUT"===this.source.nodeName&&(e=this.source.value),e&&(e=e.split(":"),t=parseInt(e[0]),n=e[1],t>=12&&(a=!0));var r='<div id="dz-timer" class="inline-container" role="dialog" aria-label="Time picker">\n        <select class="hours">',i=Array.from(Array(13).keys());return i.shift(),r+=i.map(function(e){return e===t?"<option value='"+e+"' selected='selected'>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>"}).join(" "),r+='</select>\n        <select class="minutes">',r+=Array.from(Array(60).keys()).map(function(e){return 1===e.toString().length&&(e="0"+e),e.toString()===n?"<option value='"+e+"' selected='selected'>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>"}).join(" "),r+="</select>\n        <select class=\"shift\">\n          <option value='0' "+(a?"":"selected='selected'")+">AM</option>\n          <option value='1' "+(a?"selected='selected'":"")+">PM</option>\n        </select>",r+="</select>\n      </div>"}},{key:"cleanupTimer",value:function(e,n){var a=this;return e&&e.preventDefault&&e.preventDefault(),n&&t(function(){n.classList.remove("active")}).then(function(){a.source=void 0,n.parentNode&&document.body.removeChild(n)}).catch(function(e){console.error(e)}),document.body.removeEventListener("click",this.bodyClick,!1),document.body.removeEventListener("keydown",this.bodyInput,!1),!1}}]),e}();e&&e.exports?e.exports=Object.assign({},{TimePicker:n,timePicker:new n}):(e.TimePicker=n,e.timePicker=new n)}("undefined"==typeof module?window:module),function(e){var t=function(){function e(t){_classCallCheck(this,e),this.elem=t,this.initialized=!1,this.init()}return _createClass(e,[{key:"init",value:function(){if(this.elem&&!this.initialized){this.initialized=!0;var e=+new Date;this.startElem=this.elem.querySelector(".range-start"),this.endElem=this.elem.querySelector(".range-end"),this.startElem.setAttribute("type","text"),this.endElem.setAttribute("type","text"),this.startElem.classList.add("start"+e),this.endElem.classList.add("end"+e),this.startController=new DatePicker("start"+e),this.endController=new DatePicker("end"+e),this.startController.callback=this.callback.bind(this),this.endController.callback=this.startController.callback}}},{key:"callback",value:function(){var e=[].concat(Array.prototype.slice.call(arguments)),t=e[0],n=e[1],a=t.classList.contains("range-start");a?this.start=n:this.end=n,a?this.endElem.dataset.dateMin=n:this.startElem.dataset.dateMax=n}}]),e}();e.hasOwnProperty("exports")?e.exports=Object.assign({},e.exports,t):e.RangePicker=t}("undefined"==typeof module?window:module),function(){if(typeof module==="undefined"?window:undefined){var e={date:!1,time:!1,"datetime-local":!1},t=document.createElement("input");Object.keys(e).forEach(function(n){t.type=n,e[n]=t.type===n});var n=/([\d]{4}\-[\d]{2}\-[\d]{2})T([\d]{2}\:[\d]{2})/;e.date||Array.prototype.slice.call(document.querySelectorAll('input[type="date"]')).forEach(attachDateTrigger),e.time||Array.prototype.slice.call(document.querySelectorAll('input[type="time"]')).forEach(attachTimeTrigger),e["datetime-local"]||Array.prototype.slice.call(document.querySelectorAll('input[type="datetime-local"]')).forEach(function(t){var a=t,r=a.parentNode,i=function(){return r.querySelector("input[data-original='datetime-local']")},o=a.value,l=null,u=null;o.trim().length>0&&n.test(o)&&(l=o.replace(n,"$1"),u=o.replace(n,"$2")),a.__defineGetter__("value",function(){return((this.dataset.date||"")+" "+(this.dataset.time||"")).trim()}),a.type="hidden",a.dataset.original="datetime-local";var s=document.createElement("input");s.type=e.date?"date":"text",s.placeholder="Date",s.oninput=function(e){i().dataset.date=e.target.value},l&&(s.value=l);var c=a.dataset,d=c.dateMin,h=c.dateMax;d&&(s.dataset.dateMin=d),h&&(s.dataset.dateMax=h);var v=document.createElement("input");v.type=e.time?"time":"text",v.placeholder="Time",v.oninput=function(e){i().dataset.time=e.target.value},u&&(v.value=u),[s,v].forEach(function(e){e.__defineGetter__("required",function(){return a.required}),e.__defineGetter__("validity",function(){return a.validity}),e.__defineGetter__("pattern",function(){return a.pattern}),e.__defineGetter__("validationMessage",function(){return a.validationMessage}),e.__defineSetter__("validationMessage",function(e){a.validationMessage=e})}),r.insertAdjacentElement("beforeEnd",s),r.insertAdjacentElement("beforeEnd",v),attachDateTrigger(s),attachTimeTrigger(v)})}}();
//# sourceMappingURL=dzdatetimepicker-dist.js.map