'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')};(function(a){'use strict';var b=Array.prototype.slice,c=function c(h,j){var k=function k(l){return l.getAttribute('id')===j||l.classList.contains(j)};if(k(h))return h;for(;h.parentNode;){if(h=h.parentNode,h===document.body||h===document)return void 0;if(k(h))return h}return void 0},d=function d(h){return h&&h.preventDefault&&h.preventDefault(),h.target.blur(),!1},e=function e(h){return h&&h.preventDefault&&h.preventDefault(),!1};var f=function(){function f(){_classCallCheck(this,f),this.init()}return _createClass(f,[{key:'init',value:function init(){return!this.initialized&&void(this.initialized=!0,this.setupHooks())}},{key:'setupHooks',value:function setupHooks(){var _this=this,h=function h(p){p&&p.preventDefault&&p.preventDefault();var q=_this.getCalendar(),r=q.dataset.current.split('-'),s=new Date(r[0],r[1]),t=new Date(s.getFullYear(),s.getMonth()-1),u=_this.drawDates(_this.getDaysArrayByMonth(t)),v=document.querySelector('#dz-calendar .dz-dates');q.insertAdjacentHTML('beforeEnd',u),u=q.children[q.children.length-1],q.removeChild(v);var w=t.getFullYear(),x=t.getMonth();return q.dataset.current=w+' - '+x,q.children[0].children[0].innerHTML=_this.getMonthName(x)+', '+w,l(),!1},j=function j(p){p&&p.preventDefault&&p.preventDefault();var q=_this.getCalendar(),r=q.dataset.current.split('-'),s=new Date(r[0],r[1]),t=new Date(s.getFullYear(),s.getMonth()+1),u=_this.drawDates(_this.getDaysArrayByMonth(t)),v=document.querySelector('#dz-calendar .dz-dates');q.insertAdjacentHTML('beforeEnd',u),u=q.children[q.children.length-1],q.removeChild(v);var w=t.getFullYear(),x=t.getMonth();return q.dataset.current=w+' - '+x,q.children[0].children[0].innerHTML=_this.getMonthName(x)+', '+w,l(),!1};this.bodyClick=function(p){var q=_this.getCalendar();if(q)if(!q.classList.contains('active'))document.body.removeChild(q);else if(!_this.isInCalendar(p.target))return _this.cleanupCalendar(p,q)};var k=function k(p){var q=_this.getCalendar(),r=parseInt(p.target.innerHTML),s=q.dataset.current.split('-');r=new Date(s[0],s[1],r);var t=window[_this.source.dataset.onset];t&&t(r);// zero pad the month if needed
var u=r.getMonth()+1;1===u.toString().length&&(u='0'+u);// zero pad the date if needed
var v=r.getDate();1===v.toString().length&&(v='0'+v);var w=[r.getFullYear(),u,v].join('-');return'INPUT'===_this.source.nodeName?(_this.source.value=w,'InputEvent'in window&&_this.source.dispatchEvent(new InputEvent('input'))):_this.source.dataset.dateVal&&(_this.source.dataset.dateVal=w),_this.cleanupCalendar(p,q)},l=function l(){var p=_this.getCalendar();if(p){var _q=b.call(document.querySelectorAll('#dz-calendar .dz-dates div'));_q.forEach(function(r){r.classList.contains('disabled')||r.addEventListener('click',k,!1)})}},m=function m(p){// check if calendar is already being shown
var q=_this.getCalendar();if(q)return _this.cleanupCalendar(p,q),setTimeout(function(){m(p)},300),!1;var r=p.target.getBoundingClientRect(),s={x:r.left+r.width/2,y:r.top+r.height},t=c(p.target,'date-trigger');_this.source=t;var u=_this.drawCalendar();document.body.insertAdjacentHTML('beforeEnd',u),u=document.getElementById('dz-calendar');// position the calendar near the origin point
var v=u.getBoundingClientRect(),w=4*v.width;// the width before showing = actual width * 0.25 
u.style.left=s.x-w/2+'px',u.style.top=s.y+16+'px';var x=u.children[0].children[1],y=u.children[0].children[2];x.addEventListener('click',h,!1),y.addEventListener('click',j,!1),u.classList.add('active'),l();var z='didShowDatePicker';return window[z]&&window[z](u),setTimeout(function(){document.body.addEventListener('click',_this.bodyClick,!1)},500),!1},n=document.querySelectorAll('.date-trigger');n=b.call(n);var o=function o(p){p&&(p.addEventListener('click',m,!1),'INPUT'===p.nodeName&&(p.addEventListener('focus',d,!1),p.addEventListener('blur',e,!1)))};n.forEach(function(p){o(p)}),a.attachDateTrigger=o}},{key:'getCalendar',value:function getCalendar(){return document.getElementById('dz-calendar')}},{key:'isInCalendar',value:function isInCalendar(h){var j=c(h,'dz-calendar');return j!==document.body&&void 0!=j}},{key:'getMonthName',value:function getMonthName(h){return['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'].splice(h,1)}},{key:'getDaysArrayByMonth',value:function getDaysArrayByMonth(h){for(var j=h.getFullYear(),k=h.getMonth(),l=new Date(j,k+1,0).getDate(),m=[];0<l;)m.push(new Date(j,k,l)),l--;return m.reverse()}},{key:'drawDates',value:function drawDates(h){var j=new Date;'INPUT'===this.source.nodeName&&this.source.value?j=new Date(this.source.value):this.source.dataset.dateVal&&(j=new Date(this.source.dataset.dateVal));var k='<div class="dz-dates">';this.getCalendar();var _source$dataset=this.source.dataset,l=_source$dataset.dateMax,m=_source$dataset.dateMin;l&&(l=new Date(l)),m&&(m=new Date(m));var n=null;'INPUT'===this.source.nodeName?n=new Date(this.source.value):this.source.dataset.dateVal&&(n=new Date(this.source.dataset.dateVal));// find offset of first date.
var o=h[0].getDay(),p=function p(q,r){return q.getDate()===r.getDate()&&q.getMonth()===r.getMonth()&&q.getYear()&&r.getYear()};return h.forEach(function(q,r){var s=[];// check if the date is today
p(j,q)&&s.push('today'),n&&p(q,n)&&s.push('selected'),m&&0<m.getTime()-q.getTime()&&s.push('disabled'),l&&0>l.getTime()-q.getTime()&&s.push('disabled'),s=s.join(' '),k+=0===r?'<div style="margin-left:'+35*o+'px;" role="button" class="'+s+'">'+q.getDate()+'</div>':'<div role="button" class="'+s+'">'+q.getDate()+'</div>'}),k+='</div>',k}},{key:'drawCalendar',value:function drawCalendar(){var h=new Date,j=h.getFullYear(),k=h.getMonth(),l=this.getDaysArrayByMonth(h),m='<div id="dz-calendar" class="inline-container" data-current="'+j+'-'+k+'">\n        <div class="dz-title"> \n           <h4>'+this.getMonthName(h.getMonth())+', '+h.getFullYear()+'</h4>\n           <button id="dz-prev"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>keyboard_arrow_left</title><path d="M14.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.407-4.594 4.593z" fill="#8FCB14" fill-rule="evenodd"/></svg></button>\n           <button id="dz-next"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>keyboard_arrow_right</title><path d="M8.578 16.36l4.594-4.594-4.594-4.594 1.406-1.406 6 6-6 6z" fill="#8FCB14" fill-rule="evenodd"/></svg></button>\n        </div>\n        <div class="dz-days">';return['S','M','T','W','T','F','S'].forEach(function(n){m+='<div>'+n+'</div>'}),m+='</div>\n        '+this.drawDates(l)+'\n      </div>',m}},{key:'cleanupCalendar',value:function cleanupCalendar(h,j){var _this2=this;return h&&h.preventDefault&&h.preventDefault(),j&&(j.classList.remove('active'),setTimeout(function(){document.body.removeChild(j),_this2.source=void 0},300)),document.body.removeEventListener('click',this.bodyClick,!1),!1}}]),f}();var g=function(){function g(){_classCallCheck(this,g),this.init()}return _createClass(g,[{key:'init',value:function init(){return!this.initialized&&void(this.initialized=!0,this.setupHooks())}},{key:'setupHooks',value:function setupHooks(){var _this3=this;this.bodyClick=function(m){if('SELECT'===m.target.nodeName)return!1;var n=_this3.getTimer();if(n)if(!n.classList.contains('active'))document.body.removeChild(n);else if(!_this3.isInTimer(m.target))return _this3.cleanupTimer(m,n);document.body.removeEventListener('click',_this3.bodyClick,!1)};var h=function h(){// let target = evt.target
var m=_this3.getTimer(),n=parseInt(m.children[0].value),o=parseInt(m.children[1].value),p=parseInt(m.children[2].value);1===p&&(n+=12),12===n&&0===p&&(n='00'),'INPUT'===_this3.source.nodeName&&(_this3.source.value=n+':'+o,'InputEvent'in window&&_this3.source.dispatchEvent(new InputEvent('input')));var q=window[_this3.source.dataset.onchange];q&&q({string:n+':'+o,hours:parseInt(n),minutes:o})},j=function j(m){var n=_this3.getTimer();if(n)return _this3.cleanupTimer(m,n),setTimeout(function(){j(m)},300),!1;var o=m.target.getBoundingClientRect(),p={x:o.left+o.width/2,y:o.top+o.height};_this3.source=m.target;var q=_this3.drawTimer();// set the current time
if(document.body.insertAdjacentHTML('beforeEnd',q),q=_this3.getTimer(),'INPUT'!==_this3.source.nodeName||!_this3.source.value.length){var t=new Date,u=t.getHours(),v=t.getMinutes();q.children[0].value=12<u?u-12:u,q.children[1].value=v,q.children[2].value=12<=u?1:0}// add the hooks
b.call(q.children).forEach(function(t){t.addEventListener('change',h,!1)});// if(evt.target.dataset.onchange)
//    timer.dataset.onchange = evt.target.dataset.onchange
// position the calendar near the origin point
var r=q.getBoundingClientRect(),s=4*r.width;// the width before showing = actual width * 0.25 
return q.style.left=p.x-s/2+'px',q.style.top=p.y+16+'px',q.classList.add('active'),setTimeout(function(){document.body.addEventListener('click',_this3.bodyClick,!1)},500),!1},k=function k(m){m&&(m.addEventListener('click',j,!1),'INPUT'===m.nodeName&&(m.addEventListener('focus',d,!1),m.addEventListener('blur',e,!1)))},l=b.call(document.querySelectorAll('.timer-trigger'));l.forEach(function(m){k(m)}),window.attachTimeTrigger=k}},{key:'getTimer',value:function getTimer(){return document.getElementById('dz-timer')}},{key:'isInTimer',value:function isInTimer(h){var j=c(h,'dz-timer');return j!==document.body&&void 0!=j}},{key:'drawTimer',value:function drawTimer(){var h=null,j=void 0,k=void 0,l=!1;'INPUT'===this.source.nodeName&&(h=this.source.value),h&&(h=h.split(':'),j=parseInt(h[0]),k=h[1],12<j&&(j-=12,l=!0));var m='<div id="dz-timer" class="inline-container">\n        <select class="hours">',n=Array.from(Array(13).keys());// draw hours dropdown
return n.shift(),m+=n.map(function(o){return o===j?'<option value=\''+o+'\' selected=\'selected\'>'+o+'</option>':'<option value=\''+o+'\'>'+o+'</option>'}).join(' '),m+='</select>\n        <select class="minutes">',m+=Array.from(Array(60).keys()).map(function(o){return 1===o.toString().length&&(o='0'+o),o.toString()===k?'<option value=\''+o+'\' selected=\'selected\'>'+o+'</option>':'<option value=\''+o+'\'>'+o+'</option>'}).join(' '),m+='</select>\n        <select class="shift">\n          <option value=\'0\' '+(l?'':'selected=\'selected\'')+'>AM</option>\n          <option value=\'1\' '+(l?'selected=\'selected\'':'')+'>PM</option>\n        </select>',m+='</select>\n      </div>',m}},{key:'cleanupTimer',value:function cleanupTimer(h,j){var _this4=this;return h&&h.preventDefault&&h.preventDefault(),j&&(j.classList.remove('active'),setTimeout(function(){_this4.source=void 0,j.parentNode&&document.body.removeChild(j)},300)),document.body.removeEventListener('click',this.bodyClick,!1),!1}}]),g}();a&&a.exports?a.exports={datePicker:new f,timePicker:new g}:(a.DZDatePicker=f,a.DZTimePicker=g,a.datePicker=new f,a.timePicker=new g)})('undefined'==typeof module?window:module);
