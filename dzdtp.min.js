"use strict";var slice=Array.prototype.slice,findParent=function(e,t){for(;e.parentNode;){if(e=e.parentNode,e==document.body||e==document)return;if(e.getAttribute("id")==t)return e}};!function(){var e=function(){var e=document.getElementById("dz-calendar");return e},t=function(e){var t=findParent(e,"dz-calendar");return t!=document.body&&void 0!=t},n=function(e){e=moment(e,"YYYY-MM");var t=e.range("month"),n=[];return t.by("days",function(e){n.push(e)}),n},r=function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].splice(e,1)},a=function(t){var n=moment(),r='<div class="dz-dates">',a=e(),i=void 0,d=void 0;a&&a.dataset.maxDate&&(i=moment(a.dataset.maxDate)),a&&a.dataset.minDate&&(d=moment(a.dataset.minDate));var o=t[0].day();return t.forEach(function(e,t){var a=[];e.isSame(n,"d")&&a.push("today"),d&&d.diff(e,"days")>0&&a.push("disabled"),i&&i.diff(e,"days")<0&&a.push("disabled"),a=a.join(" "),r+=0!=t?'<div role="button" class="'+a+'">'+e.date()+"</div>":'<div style="margin-left:'+35*o+'px;" role="button" class="'+a+'">'+e.date()+"</div>"}),r+="</div>"},i=function(){var e=moment(),t=moment(e,"YYYY-MM"),i=n(t),d=["S","M","T","W","T","F","S"],o='<div id="dz-calendar" data-current='+e.format("YYYY-MM")+'>\n      <div class="dz-title">\n         <h4>'+r(t.month())+", "+t.year()+'</h4>\n         <button id="dz-prev"><</button>\n         <button id="dz-next">></button>\n      </div>\n      <div class="dz-days">';return d.forEach(function(e){o+="<div>"+e+"</div>"}),o+="</div>\n      "+a(i)+"\n    </div>"},d=function(e,t){return e&&e.preventDefault(),t&&(t.classList.remove("active"),setTimeout(function(){document.body.removeChild(t)},300)),document.body.removeEventListener("click",s,!1),!1},o=function(t){t&&t.preventDefault();var i=e(),d=moment(i.dataset.current,"YYYY-MM"),o=new moment(d).subtract(1,"months"),c=a(n(o)),s=i.children[2];return i.insertAdjacentHTML("beforeEnd",c),c=i.children[3],i.removeChild(s),i.dataset.current=o.format("YYYY-MM"),i.children[0].children[0].innerHTML=r(o.month())+", "+o.year(),l(),!1},c=function(t){t&&t.preventDefault();var i=e(),d=moment(i.dataset.current,"YYYY-MM"),o=new moment(d).add(1,"months"),c=a(n(o)),s=i.children[2];return i.insertAdjacentHTML("beforeEnd",c),c=i.children[3],i.removeChild(s),i.dataset.current=o.format("YYYY-MM"),i.children[0].children[0].innerHTML=r(o.month())+", "+o.year(),l(),!1},s=function f(n){var r=e();if(r)if(r.classList.contains("active")){if(!t(n.target))return d(n,r)}else document.body.removeChild(r);document.body.removeEventListener("click",f,!1)},u=function(t){var n=e(),r=parseInt(t.target.innerHTML);r=moment(n.dataset.current+"-"+r,"YYYY-MM-DD");var a=window[n.dataset.onset];return a&&a(r),d(t,n)},l=function(){var t=e();if(t){var n=[].slice.call(t.children[2].children);n.forEach(function(e){e.classList.contains("disabled")||e.addEventListener("click",u,!1)})}},v=function h(t){var n=e();if(n){d(t,n);return setTimeout(function(){h(t)},300),!1}var r=t.target.getBoundingClientRect(),a={x:r.left+r.width/2,y:r.top+r.height},u=i();document.body.insertAdjacentHTML("beforeEnd",u),u=document.getElementById("dz-calendar");var v=u.getBoundingClientRect(),m=4*v.width;u.style.left=a.x-m/2+"px",u.style.top=a.y+16+"px";var f=u.children[0].children[1],y=u.children[0].children[2];return f.addEventListener("click",o,!1),y.addEventListener("click",c,!1),u.classList.add("active"),t.target.dataset.dateMax&&(u.dataset.maxDate=t.target.dataset.dateMax),t.target.dataset.dateMin&&(u.dataset.minDate=t.target.dataset.dateMin),t.target.dataset.onset&&(u.dataset.onset=t.target.dataset.onset),l(),setTimeout(function(){document.body.addEventListener("click",s,!1)},500),!1},m=document.querySelectorAll(".date-trigger");m=slice.call(m),m.forEach(function(e){e.addEventListener("click",v,!1)})}(),function(){var e=function(){return document.getElementById("dz-timer")},t=function(e){var t=findParent(e,"dz-timer");return t!=document.body&&void 0!=t},n=function(){var e='<div id="dz-timer">\n      <select class="hours">',t=Array.from(Array(13).keys());return t.shift(),e+=t.map(function(e){return"<option value="+e+">"+e+"</option>"}).join(" "),e+='</select>\n      <select class="minutes">',e+=Array.from(Array(60).keys()).map(function(e){return 1==e.toString().length&&(e="0"+e),"<option value="+e+">"+e+"</option>"}).join(" "),e+='</select>\n      <select class="shift">\n        <option value=0>AM</option>\n        <option value=1>PM</option>\n      </select>',e+="</select>\n    </div>"},r=function(e,t){return e&&e.preventDefault(),t&&(t.classList.remove("active"),setTimeout(function(){document.body.removeChild(t)},300)),document.body.removeEventListener("click",a,!1),!1},a=function c(n){var a=e();if(a)if(a.classList.contains("active")){if(!t(n.target))return r(n,a)}else document.body.removeChild(a);document.body.removeEventListener("click",c,!1)},i=function(t){var n=(t.target,e());if(!n.dataset.onchange)return!0;var r=parseInt(n.children[0].value),a=parseInt(n.children[1].value),i=parseInt(n.children[2].value);1==i&&(r+=12),12==r&&0==i&&(r="00");var d=window[n.dataset.onchange];d&&d({string:r+":"+a,hours:parseInt(r),minutes:a})},d=function s(t){var d=e();if(d){r(t,d);return setTimeout(function(){s(t)},300),!1}var o=t.target.getBoundingClientRect(),c={x:o.left+o.width/2,y:o.top+o.height},u=n();document.body.insertAdjacentHTML("beforeEnd",u),u=e();var l=new Date,v=l.getHours(),m=l.getMinutes();u.children[0].value=v>12?v-12:v,u.children[1].value=m,u.children[2].value=v>12?1:0,slice.call(u.children).forEach(function(e){e.addEventListener("change",i,!1)}),t.target.dataset.onchange&&(u.dataset.onchange=t.target.dataset.onchange);var f=u.getBoundingClientRect(),h=4*f.width;return u.style.left=c.x-h/2+"px",u.style.top=c.y+16+"px",u.classList.add("active"),setTimeout(function(){document.body.addEventListener("click",a,!1)},500),!1},o=slice.call(document.querySelectorAll(".timer-trigger"));o.forEach(function(e){e.addEventListener("click",d,!1)})}();
